"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ebates=ebates||{};window.eb_raf=requestAnimationFrame||webkitRequestAnimationFrame||msRequestAnimationFrame||function(e){return setTimeout(e,0)},ebates.generateGuid=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}var t=(new Date).getTime();return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+t},ebates.UI=ebates.UI||{},ebates.UI.isInView=function(e,t){var i,o,n="object"===(void 0===t?"undefined":_typeof(t)),a=n?{fraction:t.fraction||.5,threshold:{x:t.threshold&&t.threshold.x||0,y:t.threshold&&t.threshold.y||0},checkVisibility:void 0===t.checkVisibility||t.checkVisibility}:{fraction:t||.5,threshold:{x:0,y:0},checkVisibility:!0};return!(a.checkVisibility&&document.hidden||!e)&&(i=e.getBoundingClientRect(),o={x:{right:Math.max(Math.min(-(window.innerWidth-i.right)-a.threshold.x,i.width),0),left:Math.max(Math.min(-i.left-a.threshold.x,i.width),0),visible:{get amount(){return i.width-o.x.left-o.x.right},get fraction(){return o.x.visible.amount/(o.x.visible.amount+o.x.left+o.x.right)}}},y:{top:Math.max(Math.min(-i.top-a.threshold.y,i.height),0),bottom:Math.max(Math.min(-(window.innerHeight-i.bottom)-a.threshold.y,i.height),0),visible:{get amount(){return i.height-o.y.top-o.y.bottom},get fraction(){return o.y.visible.amount/(o.y.visible.amount+o.y.top+o.y.bottom)}}}},e.latestInViewMetrics=o,o.y.visible.fraction*o.x.visible.fraction>=a.fraction)},ebates.UI.scroll={events:[],add:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.getElementById("scrolling-container")||document,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50,o=!1,n=function(){e(),o=!1},a=function(){o||(setTimeout(n,i),o=!0)};return t.addEventListener("scroll",a),ebates.UI.scroll.events.push({container:t,handler:a,off:!1,throttle:i})-1},off:function(e){var t=ebates.UI.scroll.events[e];t&&t.container.removeEventListener("scroll",t.handler),t.off=!0},reactivate:function(e){var t=ebates.UI.scroll.events[e];t&&t.off&&t.container.addEventListener("scroll",t.handler)}},ebates.regex={email:/^([-\w+~]+(?:\.[-\w+~]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i,IE:/(msie|trident|edge[ \/])/i,specialId:/special=(\d+)/},ebates.cookie={set:function(e,t,i){var o=new Date;o.setTime(o.getTime()+864e5*i),document.cookie=e+"="+t+";expires="+o.toUTCString()+";path=/;"},get:function(e){var t=document.cookie.split(e+"=");return 2===t.length&&t.pop().split(";").shift()}},ebates.param={get:function(e,t){var i="&"+e+"=",o=t&&-1!==t.indexOf("?")&&"&"+t.split("?")[1].split("#")[0]||void 0===t&&window.location.search.replace("?","&")||"";return-1!==o.indexOf(i)&&decodeURIComponent(o.split(i)[1].split("&")[0])},add:function(e,t,i){var o=(void 0!==i?""+i:window.location.href).split("#"),n=o[0],a=o.length>1&&"#"+o[1]||"",r=ebates.param.get(e,n);return r!==t&&(!1!==r&&(n=ebates.param.remove(e,n)),n+=(-1===n.indexOf("?")&&"?"||"&")+e+"="+encodeURIComponent(t)+a,void 0===i&&history.pushState({},"",n)),n},remove:function(e,t){var i=void 0!==t?""+t:window.location.href,o=new RegExp("([?&])"+e+"=[^&#]*");return i=i.replace(o,"$1").replace(/([?&])&/,"$1").replace(/[?&]($|#.*)/,"$1"),void 0===t&&history.pushState({},"",i),i}},ebates.js={registry:[],require:function(){var e={},t={dataType:"script",cache:!0,crossDomain:!0},i=[].slice.call(arguments),o=i.length&&"function"==typeof i[i.length-1]&&i.pop(),n=this.registry;return $.each(i,function(i,o){!n[o]&&(e[o]=n[o]=$.ajax(o,t))||200!==n[o].status&&!e[o]&&(e[o]=n[o])}),$.when.apply($,$.map(e,function(e){return e})).then(o),this}},ebates.css={registry:{},require:function(){var e,t,i,o={},n="function"==typeof arguments[arguments.length-1],a=null,r=this.registry,s=function(e){var t='<link rel="stylesheet" href="'+e+'">',i=document.createElement("div");eb_raf(function(){setTimeout(function(){document.body.appendChild(i),i.outerHTML=t},0)})};if(n)e=[].slice.call(arguments),t=e.pop(),$.each(e,function(e,t){var i={url:t,cache:!0,crossDomain:!0,complete:s.bind(null,t),timeout:1e3};r[t]?4===r[t].readyState||o[t]||(o[t]=r[t]):(r[t]=$.ajax(i),o[t]=r[t])}),$.when.apply($,$.map(o,function(e){return e})).then(function(){a=setTimeout(t,0)}).always(function(){null===a&&setTimeout(t,0)});else for(i=0;i<arguments.length;i++)r[arguments[i]]||(s(arguments[i]),r[arguments[i]]={status:200});return this}},ebates.cache=function(e){this.c="object"===(void 0===e?"undefined":_typeof(e))&&e||{p:0,cache:{},tss:{},keys:[],sz:e&&Math.abs(e)||10}},ebates.cache.prototype.get=function(e){return this.c.cache[e]},ebates.cache.prototype.set=function(e,t){var i=this.c.p,o=t||i;return void 0!==this.c.cache[o]?(this.c.cache[o]=e,this.c.tss[o]=Date.now()):(void 0!==this.c.keys[i]&&void 0!==this.c.cache[this.c.keys[i]]&&(delete this.c.cache[this.c.keys[i]],delete this.c.tss[this.c.keys[i]]),this.c.keys[i]=o,this.c.cache[o]=e,this.c.tss[o]=Date.now(),this.c.p=(this.c.p+1)%this.c.sz),this},ebates.cache.prototype.getTs=function(e){return this.c.tss[e]},ebates.cache.prototype.serialize=function(e){return this.c.ts=Date.now(),e?JSON.stringify(this.c):this.c},ebates.getBrowser=function(e){var t,i,o;return t=e||navigator.userAgent,o=t.match(/(opera|chrome|safari|firefox|msie|trident|FxiOS|CriOS(?=\/))\/?\s*(\d+)/i)||[],/trident/i.test(o[1])?(i=/\brv[ :]+(\d+)/g.exec(t)||[],{name:"IE",version:i[1]||""}):"Chrome"===o[1]&&null!=(i=t.match(/\b(OPR|Edge?)\/(\d+)/))?{name:i[1].replace("OPR","Opera").replace("Edg$","Edge"),version:i[2]}:(o=o[2]?[o[1],o[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(i=t.match(/version\/(\d+)/i))&&o.splice(1,1,i[1]),"FxiOS"===o[0]&&(o[0]="Firefox"),"CriOS"===o[0]&&(o[0]="Chrome"),{name:o[0],version:o[1]})},ebates.isLocalstorageAvailable=function(){var e;if(void 0!==ebates.localStorage)return ebates.localStorage;e="localstorge"+Date.now();try{return localStorage.setItem(e,"test"),localStorage.removeItem(e),ebates.localStorage=!0,!0}catch(e){return ebates.localStorage=!1,!1}},$(function(){var e=null,t=Date.now&&Date.now()||(new Date).getTime();$(window).on("load resize scroll",function(){var i=Date.now&&Date.now()||(new Date).getTime();i>50+t&&(t=i,$(window).trigger("scroll-throttle"),clearTimeout(e),e=setTimeout(function(){$(window).trigger("scroll-throttle")},50))})}),function(){var e=navigator.userAgent;ebates.button={browser:/edge?\//i.test(e)&&"edge"||!ebates.regex.IE.test(e)&&(/firefox\//i.test(e)&&"firefox"||/AppleWebKit\//i.test(e)&&(!!window.chrome&&"chrome"||(Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0||function(e){return"[object SafariRemoteNotification]"===e.toString()}(!window.safari||safari.pushNotification))&&"safari"||"unknown"))||"unknown"}}(),window.addEventListener("DOMContentLoaded",function(){if(ebates.cookie.get("enableApple")&&"APL"===ebates.param.get("social_media")&&window.opener&&window.opener.location.host===location.host){window.name="Rakuten-AppleSignInWindow";var e=window.opener.open("/",window.name,"height=500,width=600,left=200,top=100,resizable=yes,scrollbars=yes"),t=ebates.param.add("type",ebates.param.get("type"),window.opener.location.href);t=ebates.param.add("social_media",ebates.param.get("social_media"),t),window.opener.location.assign(t),e.close()}});
//# sourceMappingURL=ebates-main-7651353af0.js.map
