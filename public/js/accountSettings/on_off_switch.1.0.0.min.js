$.fn.onOffSwitch=function(b){var e={width:60.01,height:20.01,maxWidth:400},d=$.extend({text:{on:"ON",off:"OFF"},on:false,animateT:200,width:e.width,height:e.height,classes:{on:"",off:""}},b||{});function c(){var f=$(this).hasClass(".on-off-switch")?$(this):$(this).closest(".on-off-switch"),i=$(f).hasClass("on"),g=i?0:$(f).height()-$(f).width(),h=$(f).children("input:checkbox, input:radio");if($(f).hasClass("disabled")||f.children(":animated").length){return false}f.off("mousemove mouseleave");$(".on-off-slide",f).stop(false,false).animate({right:g},d.animateT);$(f).toggleClass("on");a.call(this,h,i);return false}function a(f,g){if(!f||f.length>2){return}$(f[0]).prop("checked",!g);this.triggerChange?$(f[0]).trigger("change",{internal:true}):$.noop;if(f.length>1&&$(f[0]).is(":radio")&&$(f[1]).is(":radio")){$(f[1]).prop("checked",g).trigger("change",{internal:true})}}return this.each(function(){var l=$(this),f=(d.height===e.height&&$(this).height()>d.height)?$(this).height():d.height,k=(d.width===e.width&&$(this).width()>d.width)&&$(this).width()<e.maxWidth?$(this).width()+0.1:d.width,j=$("<div></div>").addClass("on-off-center").css({height:f,width:f,right:k-f}),i=$("<div>"+d.text.on+"</div>").addClass("on-off-switch-on "+d.classes.on).css({height:f,width:k-f/2,textIndent:-f/2+f/8+"px"}),g=$("<div>"+d.text.off+"</div>").addClass("on-off-switch-off "+d.classes.off).css({height:f,width:k-f/2,textIndent:f/2-f/8+"px"}),h=$("<div></div>").addClass("on-off-slide").css({height:f,width:Math.ceil(k*2-f),right:0});this.triggerChange=false;h.append(i,g,j);$("input:checkbox, input:radio",this).hide().first().change(function(n,m){if(!m||!m.internal){c.call(this)}});l.append(h).css({height:f,width:k,lineHeight:f+"px"}).addClass("on-off-switch").fadeIn(d.animateT);l.mouseup(c).mousedown(function(o){var m=o.pageX,n=parseInt($(".on-off-slide",this).css("right"));if(l.hasClass("disabled")||l.children(":animated").length){return false}l.mousemove(function(q){var p=q.pageX-m;p=l.hasClass("on")?(p>0?0:p):(p>0?p:0);$(".on-off-slide",this).css({right:n-p})}).mouseleave(c);return false});if($("input:checkbox, input:radio",this).first().is(":checked")||d.on){c.call(this)}this.triggerChange=true})};