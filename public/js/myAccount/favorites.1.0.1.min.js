$(function(){$(".container-fixed").on("click",".fav-lg, .fav-sm",function(){if(ebates&&ebates.user&&ebates.user.loggedIn){var b=jQuery(this),g=function(k){return k.parent().hasClass("fav")&&k.parent().parent().hasClass("store")?true:false},h=b.hasClass("fav-lg")||g(b)?"store":b.hasClass("fav-sm")?"coupon":false,a=b.data("merch"),f={store:"/my/addFavorites.do",coupon:"/my/saveCoupons.do"},d={store:"/my/removeFavorites.do",coupon:"/my/unsaveCoupons.do"},j={store:{action:"add",sup:"sup_landing_merchant",cparent:true,addtofav:a},coupon:{msd_id:a}},e={store:{action:"delete",sup:"sup_landing_merchant",cparent:true,deletefromfav:a},coupon:{"delete":a}},c;if(b.hasClass("off")){jQuery.ajax({url:f[h],data:j[h],type:"POST"});c=true;b.removeClass("off").addClass("on")}else{jQuery.ajax({url:d[h],data:e[h],type:"POST"});c=false;b.removeClass("on").addClass("off")}if(b.hasClass("fav-lg")){var i=b.parent().find(".fav-message");if(c){i.removeClass("fav-message-show");i.html("<span class='arrow-lg arr-down'></span>Love you too!").fadeIn("fast")}else{i.html("<span class='arrow-lg arr-down'></span>Miss you already!").fadeIn("fast")}setTimeout(function(){i.fadeOut("fast")},3000)}}else{if(ebates&&ebates.user){window.location="/auth/getLogonForm.do?pageName=/common_templates/login.vm"}else{console&&console.log&&console.log("ebates.user object is needed")}}return false})});